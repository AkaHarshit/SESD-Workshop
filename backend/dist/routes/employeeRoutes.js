"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const EmployeeController_1 = require("../controllers/EmployeeController");
const EmployeeService_1 = require("../services/EmployeeService");
const EmployeeRepository_1 = require("../repositories/EmployeeRepository");
const auth_1 = require("../middlewares/auth");
const roleGuard_1 = require("../middlewares/roleGuard");
const employeeValidators_1 = require("../middlewares/validators/employeeValidators");
const router = (0, express_1.Router)();
const employeeRepository = new EmployeeRepository_1.EmployeeRepository();
const employeeService = new EmployeeService_1.EmployeeService(employeeRepository);
const employeeController = new EmployeeController_1.EmployeeController(employeeService);
router.get('/', employeeValidators_1.listValidation, employeeController.getList);
router.get('/departments', employeeController.getDepartments);
router.get('/:id', employeeValidators_1.getByIdValidation, employeeController.getById);
router.post('/', auth_1.authMiddleware, (0, roleGuard_1.requireRoles)('admin', 'hr'), employeeValidators_1.createEmployeeValidation, employeeController.create);
router.put('/:id', auth_1.authMiddleware, (0, roleGuard_1.requireRoles)('admin', 'hr'), employeeValidators_1.updateEmployeeValidation, employeeController.update);
router.delete('/:id', auth_1.authMiddleware, (0, roleGuard_1.requireRoles)('admin', 'hr'), employeeValidators_1.getByIdValidation, employeeController.delete);
exports.default = router;
